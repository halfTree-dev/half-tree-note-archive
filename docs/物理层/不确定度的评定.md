# 不确定度的评定
出于测量结果会因为各种因素出现偏差，即误差不可避免，所以测量结果会有一定程度上的不确定性。

## 不确定性的来源
不确定性的来源包括测量过程中产生的误差与仪器本身或环境影响造成的测量误差。

前者被称为随机偏差，后者被称为系统偏差。

## 不确定度

为了刻画这种由不确定性带来的偏差，我们引入不确定度的概念来表征数据的不确定性。

不确定度是一个物理量，用来量化表示一个测量结果的不确定性，我们接下来介绍它的计算、表示方法。

### A类不确定度

现在，考虑我们测得了一组数据 $x_{1}, x_{2}, ... , x_{n}$，那么进行如下计算

先测算数据的平均值
$$
\bar{x} = \frac{1}{n} \sum_{i=1}^{n} x_i
$$

然后计算实验标准差，注意不是标准差，分母为 $n - 1$
$$
s = \sqrt{\frac{1}{n-1} \sum_{i=1}^{n} (x_i-\bar{x})^2}
$$

数据的不确定度可表示为
$$
U_{A} = \frac{s}{\sqrt{n}}
$$

我们通过计算数据与它们的平均值之间的偏差算得了不确定度，像这样的不确定度由测量中的随机偏差产生，称这种不确定度为 A类不确定度。

### A类不确定度的修正
让我们举一个例子，假设现在我们正在进行一项实验，我们收集了具有相当规模的实验数据，处理后，发现这项实验的测量结果近似于正态分布 $f(x) = \frac{1}{\sigma\sqrt{2\pi}} e^{-\frac{1}{2}\left(\frac{x-\mu}{\sigma}\right)^2}$。

于是你知道在这次实验中，有 $0.997$ 的可能性实验数据会落在 $[\mu - 3\sigma, \mu + 3\sigma]$ 的区间内。所以说，要覆盖 $99.7\%$ 的实验数据，实际的方差区间应当是现有的方差区间的 $3$ 倍。

于是，我们称置信度为 $0.997$ 的正态分布分布因子的值为 $3$。

为了让实验结果覆盖更大区间内的可能出现的实验数据，即提高结果的置信度，可以根据上述的分布因子 $t$ 对A类不确定度进行修正。

对于给定的置信概率 $P$，A类不确定度的修正计算为

$$U_{A} = t_{P} \cdot \frac{s}{\sqrt{n}}$$

其中

- $t_{P,\nu}$ 是置信概率为 $P$ 的分布因子
- $s$ 是实验标准差
- $n$ 是测量次数

常见的置信概率为 $0.95$ 或 $0.99$。当测量次数足够多时$(n>30)$，t分布近似于正态分布，此时

- $P=0.95$时，$t_{P,\nu} \approx 1.96$
- $P=0.99$时，$t_{P,\nu} \approx 2.58$

对于少量测量$(n<10)$，t分布系数就不能直接用简单的正态分布或其它分布的分布因子替代，应当查表获取准确的系数值。

### B类不确定度

除了随机偏差，系统偏差也可能对测量数据产生影响，我们称由这部分偏差产生的不确定度为 B类不确定度 $U_{B}$。

B类不确定度的一个主要来源为仪器本身，可以通过查找仪器的标准校准证书来获取相关信息。此外，诸如环境温度、气压等也可能造成不确定，实验前要综合估计这些因素。

### 总不确定度

用平方和根法求总不确定度，总不确定度为上述两种不确定度的平方和

$$
U = \sqrt{U_{A}^2 + U_{B}^2}
$$

## 在测量结果中表征不确定度

当表示实验的测量结果时，应当表征不确定度信息

$$
x = \bar{x} \pm U \textit{(unit)}
$$

其中 $\bar{x}$ 为平均值，$U$ 为测得的不确定度信息。

## 间接测量量的不确定度

假设我们最终得到了若干个实验结果 $x_{1}, x_{2}, ... , x_{n}$，其中对于第 $k$ 个实验结果有 $x_{k} = \bar{x_{k}} \pm U_{k}$。

那么，假设我们根据这些实验结果计算出来了一个新的量

$$
y = f(x_{1}, x_{2}, ..., x_{n})
$$

计算这个新量 $y$ 的不确定度 $U_y$ 可以使用不确定度传递公式。假设各个测量量之间相互独立，则不确定度的计算公式为

$$
U_y = \sqrt{\sum_{i=1}^{n} \left( \frac{\partial f}{\partial x_i} \right)^2 U_{i}^2}
$$

!!! note "不确定度传递公式"
    这个不确定度的传递公式课本上是直接介绍了，而没有阐述它的推理过程，我也没找到相应的资料，所以先不关于其原理展开介绍。

其中
- $\frac{\partial f}{\partial x_i}$ 是函数 $f$ 对于变量 $x_i$ 的偏导数
- $U_i$ 是变量 $x_i$ 的不确定度

这种方法被称为不确定度传递法则或误差传递公式。在实际应用中，需要先求出函数 $f$ 对各个变量的偏导数，然后代入上述公式计算。

对于一些常见的函数关系，不确定度计算可以简化

1. 若 $y = x_1 \pm x_2 \pm ... \pm x_n$，则 $U_y = \sqrt{U_1^2 + U_2^2 + ... + U_n^2}$

2. 若 $y = k \cdot x$（$k$ 为常数），则 $U_y = |k| \cdot U_x$

3. 若 $y = x_1 \cdot x_2 \cdot ... \cdot x_n$，则相对不确定度 $\frac{U_y}{|y|} = \sqrt{\left(\frac{U_1}{|x_1|}\right)^2 + \left(\frac{U_2}{|x_2|}\right)^2 + ... + \left(\frac{U_n}{|x_n|}\right)^2}$